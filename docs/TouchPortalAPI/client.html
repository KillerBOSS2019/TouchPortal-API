<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 7.3.1" />
    <title>TouchPortalAPI.client API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style>/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}@media (prefers-color-scheme:dark){		.pdoc .hll{background-color:#49483e}	.pdoc{background:#272822; color:#f8f8f2}	.pdoc .c{color:#75715e}	.pdoc .err{color:#960050; background-color:#1e0010}	.pdoc .k{color:#66d9ef}	.pdoc .l{color:#ae81ff}	.pdoc .n{color:#f8f8f2}	.pdoc .o{color:#f92672}	.pdoc .p{color:#f8f8f2}	.pdoc .ch{color:#75715e}	.pdoc .cm{color:#75715e}	.pdoc .cp{color:#75715e}	.pdoc .cpf{color:#75715e}	.pdoc .c1{color:#75715e}	.pdoc .cs{color:#75715e}	.pdoc .gd{color:#f92672}	.pdoc .ge{font-style:italic}	.pdoc .gi{color:#a6e22e}	.pdoc .go{color:#66d9ef}	.pdoc .gp{color:#f92672; font-weight:bold}	.pdoc .gs{font-weight:bold}	.pdoc .gu{color:#75715e}	.pdoc .kc{color:#66d9ef}	.pdoc .kd{color:#66d9ef}	.pdoc .kn{color:#f92672}	.pdoc .kp{color:#66d9ef}	.pdoc .kr{color:#66d9ef}	.pdoc .kt{color:#66d9ef}	.pdoc .ld{color:#e6db74}	.pdoc .m{color:#ae81ff}	.pdoc .s{color:#e6db74}	.pdoc .na{color:#a6e22e}	.pdoc .nb{color:#f8f8f2}	.pdoc .nc{color:#a6e22e}	.pdoc .no{color:#66d9ef}	.pdoc .nd{color:#a6e22e}	.pdoc .ni{color:#f8f8f2}	.pdoc .ne{color:#a6e22e}	.pdoc .nf{color:#a6e22e}	.pdoc .nl{color:#f8f8f2}	.pdoc .nn{color:#f8f8f2}	.pdoc .nx{color:#a6e22e}	.pdoc .py{color:#f8f8f2}	.pdoc .nt{color:#f92672}	.pdoc .nv{color:#f8f8f2}	.pdoc .ow{color:#f92672}	.pdoc .w{color:#f8f8f2}	.pdoc .mb{color:#ae81ff}	.pdoc .mf{color:#ae81ff}	.pdoc .mh{color:#ae81ff}	.pdoc .mi{color:#ae81ff}	.pdoc .mo{color:#ae81ff}	.pdoc .sa{color:#e6db74}	.pdoc .sb{color:#e6db74}	.pdoc .sc{color:#e6db74}	.pdoc .dl{color:#e6db74}	.pdoc .sd{color:#e6db74}	.pdoc .s2{color:#e6db74}	.pdoc .se{color:#ae81ff}	.pdoc .sh{color:#e6db74}	.pdoc .si{color:#e6db74}	.pdoc .sx{color:#e6db74}	.pdoc .sr{color:#e6db74}	.pdoc .s1{color:#e6db74}	.pdoc .ss{color:#e6db74}	.pdoc .bp{color:#f8f8f2}	.pdoc .fm{color:#a6e22e}	.pdoc .vc{color:#f8f8f2}	.pdoc .vg{color:#f8f8f2}	.pdoc .vi{color:#f8f8f2}	.pdoc .vm{color:#f8f8f2}	.pdoc .il{color:#ae81ff}}</style>
<style>/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}@media (prefers-color-scheme:dark){:root{--pdoc-background:#212529;}.pdoc{--text:#f7f7f7;--muted:#9d9d9d;--link:#58a6ff;--link-hover:#3989ff;--code:#333;--active:#555;--accent:#343434;--accent2:#555;--nav-hover:rgba(0, 0, 0, 0.1);--name:#77C1FF;--def:#0cdd0c;--annotation:#00c037;}}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}.git-button{display:none !important;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}.version_header{font-size:.75rem;float:right;margin-top:-3em;margin-right:4em;}nav.pdoc a.inline{display:inline-block;}.module-list-button:not([href$='.html']){display:none !important;}@media (min-width:770px){main, header{width:auto !important;}}@media (max-width:769px){#navtoggle{top:.5rem !important;right:3rem !important;}nav.pdoc input[type=search]{width:calc(100% - 70px - 3rem);}.version_header{float:left;margin-top:-2em;}}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc .attribution{font-size:small;}.pdoc .attribution img{height:25px; width:auto;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>
                        <a class="pdoc-button module-list-button" href="../TouchPortalAPI.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                            &nbsp;TouchPortalAPI</a>


                        <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                               pattern=".+" required>



                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="class" href="#Client">Client</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Client.__init__">Client</a>
                        </li>
                        <li>
                                <a class="variable" href="#Client.TPHOST">TPHOST</a>
                        </li>
                        <li>
                                <a class="variable" href="#Client.TPPORT">TPPORT</a>
                        </li>
                        <li>
                                <a class="variable" href="#Client.RCV_BUFFER_SZ">RCV_BUFFER_SZ</a>
                        </li>
                        <li>
                                <a class="variable" href="#Client.SND_BUFFER_SZ">SND_BUFFER_SZ</a>
                        </li>
                        <li>
                                <a class="variable" href="#Client.SOCK_EVENT_TO">SOCK_EVENT_TO</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.isConnected">isConnected</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.isActionBeingHeld">isActionBeingHeld</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.createState">createState</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.createStateMany">createStateMany</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.removeState">removeState</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.removeStateMany">removeStateMany</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.choiceUpdate">choiceUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.choiceUpdateSpecific">choiceUpdateSpecific</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.settingUpdate">settingUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.stateUpdate">stateUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.stateUpdateMany">stateUpdateMany</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.showNotification">showNotification</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.connectorUpdate">connectorUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.updateActionData">updateActionData</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.send">send</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.connect">connect</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.disconnect">disconnect</a>
                        </li>
                        <li>
                                <a class="function" href="#Client.getActionDataValue">getActionDataValue</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TYPES">TYPES</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TYPES.__init__">TYPES</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onHold_up">onHold_up</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onHold_down">onHold_down</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onConnect">onConnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onAction">onAction</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onListChange">onListChange</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onConnectorChange">onConnectorChange</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onShutdown">onShutdown</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onBroadcast">onBroadcast</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onSettingUpdate">onSettingUpdate</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onNotificationOptionClicked">onNotificationOptionClicked</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.allMessage">allMessage</a>
                        </li>
                        <li>
                                <a class="variable" href="#TYPES.onError">onError</a>
                        </li>
                </ul>

            </li>
    </ul>


    <footer>Documentation for TouchPortalAPI v1.6<br/>generated: 2021-08-29 05:58 UTC<br/>git version: <a href='https://github.com/KillerBOSS2019/TouchPortal-API/commit/a3f0ebbf' class='inline' target='_blank'>1.5-38-ga3f0ebbf</a><br/></footer>

                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
        <div class="version_header">TouchPortalAPI v1.6</div>
<a href="https://github.com/KillerBOSS2019/TouchPortal-API/blob/main/TouchPortalAPI/client.py" target="_blank" class="github-corner" title="View the latest source on GitHub" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#3bb300; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true" class="corner-svg">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>
    .corner-svg {
        width: 80px;
        height: 80px;
    }
    .github-corner:hover .octo-arm { animation: octocat-wave 560ms ease-in-out }
    @keyframes octocat-wave {
        0%, 100% { transform: rotate(0) }
        20%, 60% { transform: rotate(-25deg) }
        40%, 80% { transform: rotate(10deg) }
    }
    @media (max-width: 769px) {
        .corner-svg {
            width: 50px;
            height: 50px;
        }
    }
</style>                    <h1 class="modulename">
<a href="./../TouchPortalAPI.html">TouchPortalAPI</a><wbr>.client    </h1>

                
                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    This file is part of the TouchPortal-API project.</span>
<span class="s2">    Copyright (C) 2021 DamienS</span>

<span class="s2">    This program is free software: you can redistribute it and/or modify</span>
<span class="s2">    it under the terms of the GNU General Public License as published by</span>
<span class="s2">    the Free Software Foundation, either version 3 of the License, or</span>
<span class="s2">    (at your option) any later version.</span>

<span class="s2">    This program is distributed in the hope that it will be useful,</span>
<span class="s2">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="s2">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="s2">    GNU General Public License for more details.</span>

<span class="s2">    You should have received a copy of the GNU General Public License</span>
<span class="s2">    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">selectors</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pyee</span> <span class="kn">import</span> <span class="n">ExecutorEventEmitter</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">Lock</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Client&#39;</span><span class="p">,</span> <span class="s1">&#39;TYPES&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">TYPES</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Event type enumerations. These correspond to the message types Touch Portal may send.</span>
<span class="sd">    Event handler callbacks receive one parameter, which is the JSON data structure sent</span>
<span class="sd">    from TP and then converted to a corresponding Python object using `json.loads()`.</span>
<span class="sd">    Usage example:</span>
<span class="sd">        ```py</span>
<span class="sd">        import TouchPortalAPI as TP</span>

<span class="sd">        client = TP.Client(&quot;myplugin&quot;)</span>

<span class="sd">        @client.on(TP.TYPES.onConnect)</span>
<span class="sd">        # equivalent to: @client.on(&#39;info&#39;)</span>
<span class="sd">        def onConnect(data):</span>
<span class="sd">            print(data)</span>

<span class="sd">        # alternatively, w/out decorators:</span>
<span class="sd">        def onAction(data):</span>
<span class="sd">            print(data)</span>

<span class="sd">        client.on(TP.TYPES.onAction, onAction)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">onHold_up</span> <span class="o">=</span> <span class="s1">&#39;up&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the action is used in a hold functionality and the user releases the Touch Portal button (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onHold_down</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the action is used in a hold functionality and the user presses the Touch Portal button down (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onConnect</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span>
    <span class="sd">&quot;&quot;&quot; Info message returned after successful pairing. &quot;&quot;&quot;</span>
    <span class="n">onAction</span> <span class="o">=</span> <span class="s1">&#39;action&#39;</span>
    <span class="sd">&quot;&quot;&quot; When actions are triggered by the user (Api 1.0+) &quot;&quot;&quot;</span>
    <span class="n">onListChange</span> <span class="o">=</span> <span class="s1">&#39;listChange&#39;</span>
    <span class="sd">&quot;&quot;&quot; When a user makes a change in one of your lists (Api 1.0+) &quot;&quot;&quot;</span>
    <span class="n">onConnectorChange</span> <span class="o">=</span> <span class="s1">&#39;connectorChange&#39;</span>
    <span class="sd">&quot;&quot;&quot; When a connector is used in a slider functionality (connector) (Api 4.0+) &quot;&quot;&quot;</span>
    <span class="n">onShutdown</span> <span class="o">=</span> <span class="s1">&#39;closePlugin&#39;</span>
    <span class="sd">&quot;&quot;&quot; When Touch Portal tries to close your plug-in (Api 2.0+) &quot;&quot;&quot;</span>
    <span class="n">onBroadcast</span> <span class="o">=</span> <span class="s1">&#39;broadcast&#39;</span>
    <span class="sd">&quot;&quot;&quot; When Touch Portal broadcasts a message (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onSettingUpdate</span> <span class="o">=</span> <span class="s1">&#39;settings&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the plugin&#39;s Settings have been updated (by user or from the plugin itself) (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onNotificationOptionClicked</span> <span class="o">=</span> <span class="s2">&quot;notificationOptionClicked&quot;</span>
    <span class="sd">&quot;&quot;&quot; When a user clicks on a notification action (Api 4.0+) &quot;&quot;&quot;</span>
    <span class="n">allMessage</span> <span class="o">=</span> <span class="s1">&#39;any&#39;</span>
    <span class="sd">&quot;&quot;&quot; Special event handler which will receive **all** messages from TouchPortal. &quot;&quot;&quot;</span>
    <span class="n">onError</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
    <span class="sd">&quot;&quot;&quot; Special event emitted when any other event callback raises an exception.</span>
<span class="sd">        For this particular event, the parameter passed to the callback handler will be an `Exception` object.</span>
<span class="sd">        See also `pyee.ExecutorEventEmitter.error` event.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">ExecutorEventEmitter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A TCP/IP client for [Touch Portal API](https://www.touch-portal.com/api) plugin integration.</span>
<span class="sd">    Implements a [pyee.ExecutorEventEmitter](https://pyee.readthedocs.io/en/latest/#pyee.ExecutorEventEmitter).</span>

<span class="sd">    After an initial connection to a Touch Portal desktop application &quot;server,&quot; the client</span>
<span class="sd">    implements a send/receive event loop while maintaining the open sockets. Messages between</span>
<span class="sd">    TP and the plugin are exchanged asynchronously, with all sending methods possibly returning</span>
<span class="sd">    before the actual data is sent.</span>

<span class="sd">    Messages from Touch Portal are delivered to the plugin script via event handler callbacks,</span>
<span class="sd">    which can be either individual callbacks per message type, and/or a single handler for all</span>
<span class="sd">    types of messages. The callbacks are executed in separate Thread(s), using a pool of up to</span>
<span class="sd">    any number of concurrent threads as needed (if using more than one thread, the plugin</span>
<span class="sd">    code itself is responsible for thread safety of its internal data). Please check the</span>
<span class="sd">    `pyee.EventEmitter` documentation for general information on how events are handled</span>
<span class="sd">    (which can be either via function decorators or via the inherited `Client.on()` method).</span>

<span class="sd">    Generated event names correspond to Touch Portal API message types, one for each type</span>
<span class="sd">    as defined in the TP API documentation (eg. &quot;action&quot; or &quot;listChange&quot;) as well as one event</span>
<span class="sd">    which is generated for all message types (&quot;any&quot;). Alternately, for a more formal approach,</span>
<span class="sd">    the corresponding members of the `TYPES` class could be used instead of string names</span>
<span class="sd">    (eg. `TYPES.onAction` or `TYPES.onListChange`).</span>

<span class="sd">    Any errors raised within event listeners/handlers are trapped and then reported in the</span>
<span class="sd">    inherited &quot;error&quot; event (from pyee.ExecutorEventEmitter), aka `TYPES.onError`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TPHOST</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span>
    <span class="sd">&quot;&quot;&quot; TP plugin server host IPv4 address. &quot;&quot;&quot;</span>
    <span class="n">TPPORT</span> <span class="o">=</span> <span class="mi">12136</span>
    <span class="sd">&quot;&quot;&quot; TP plugin server host IPv4 port number. &quot;&quot;&quot;</span>
    <span class="n">RCV_BUFFER_SZ</span> <span class="o">=</span> <span class="mi">4096</span>
    <span class="sd">&quot;&quot;&quot; [B] incoming data buffer size. &quot;&quot;&quot;</span>
    <span class="n">SND_BUFFER_SZ</span> <span class="o">=</span> <span class="mi">32</span><span class="o">**</span><span class="mi">4</span>
    <span class="sd">&quot;&quot;&quot; [B] maximum size of send data buffer (1MB). &quot;&quot;&quot;</span>
    <span class="n">SOCK_EVENT_TO</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="sd">&quot;&quot;&quot; [s] maximum wait time for socket events (blocking timeout for selector.select()). &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
                 <span class="n">sleepPeriod</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
                 <span class="n">autoClose</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">checkPluginId</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">updateStatesOnBroadcast</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">maxWorkers</span><span class="p">:</span><span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">executor</span><span class="p">:</span><span class="n">Executor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an instance of the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            `pluginId`: ID string of the TouchPortal plugin using this client. **Required.**</span>
<span class="sd">            `sleepPeriod`: Seconds to sleep the event loop between socket read events. Default: 0.01</span>
<span class="sd">            `autoClose`: If `True` then this client will automatically disconnect when a `closePlugin` message is received from TP.</span>
<span class="sd">                Default is `False`.</span>
<span class="sd">            `checkPluginId`: Validate that `pluginId` matches ours in any messages from TP which contain one (such as actions).</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `updateStatesOnBroadcast`: Re-send all cached State values whenever user switches TP page.</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `maxWorkers`: Maximum worker threads to run concurrently for event handlers.</span>
<span class="sd">                Default of `None` creates a default-constructed `ThreadPoolExecutor`.</span>
<span class="sd">            `executor`: Passed to `pyee.ExecutorEventEmitter`. By default this is a default-constructed</span>
<span class="sd">                [ThreadPoolExecutor](https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor),</span>
<span class="sd">                optionally using `maxWorkers` concurrent threads.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">executor</span> <span class="ow">and</span> <span class="n">maxWorkers</span><span class="p">:</span>
            <span class="n">executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">maxWorkers</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="n">executor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span> <span class="o">=</span> <span class="n">pluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sleepPeriod</span> <span class="o">=</span> <span class="n">sleepPeriod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoClose</span> <span class="o">=</span> <span class="n">autoClose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkPluginId</span> <span class="o">=</span> <span class="n">checkPluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStatesOnBroadcast</span> <span class="o">=</span> <span class="n">updateStatesOnBroadcast</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>       <span class="c1"># main loop inerrupt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>           <span class="c1"># not running yet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>  <span class="c1"># set when __sendBuffer has data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>        <span class="c1"># mutex for __sendBuffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__buffered_readLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Should be ready to read</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RCV_BUFFER_SZ</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">raise</span>  <span class="c1"># No connection</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span> <span class="o">+=</span> <span class="n">data</span>
                <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="p">[:</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">lines</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># No connection</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Peer closed the connection.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getWriteLock</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Should be ready to write</span>
                <span class="n">sent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="k">raise</span>  <span class="c1"># No connection</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">[:</span><span class="n">sent</span><span class="p">]</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="n">events</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SOCK_EVENT_TO</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>  <span class="c1"># may be set while waiting for selector events (unlikely)</span>
                    <span class="k">break</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__buffered_readLine</span><span class="p">():</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__processMessage</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__write</span><span class="p">()</span>
                <span class="c1"># Sleep for period or until there is data in the write buffer.</span>
                <span class="c1"># In theory if data is constantly avaiable, this could block,</span>
                <span class="c1"># in which case it may be better to self.__stopEvent.wait()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sleepPeriod</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__die</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception in client event loop: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__processMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">and</span> <span class="p">(</span><span class="n">act_type</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkPluginId</span> <span class="ow">and</span> <span class="p">(</span><span class="n">pid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pluginId&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="n">pid</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoClose</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onHold_down</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actionId&#39;</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span><span class="p">[</span><span class="n">aid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onHold_up</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actionId&#39;</span><span class="p">)):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span><span class="p">[</span><span class="n">aid</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onBroadcast</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateStatesOnBroadcast</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__stateUpdate</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__emitEvent</span><span class="p">(</span><span class="n">act_type</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__emitEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">TYPES</span><span class="o">.</span><span class="n">allMessage</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">DefaultSelector</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">TPHOST</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TPPORT</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">raise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="p">(</span><span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">get_map</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in selector.unregister(): </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SHUT_RDWR</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in socket.close(): </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Delete reference to socket object for garbage collection, socket cannot be reused anyway.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># print(&quot;TP Client stopped.&quot;)</span>

    <span class="k">def</span> <span class="nf">__die</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__emitEvent</span><span class="p">(</span><span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">exc</span><span class="p">:</span> <span class="k">raise</span> <span class="n">exc</span>

    <span class="k">def</span> <span class="nf">__getWriteLock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__die</span><span class="p">(</span><span class="n">exc</span><span class="o">=</span><span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Send buffer mutex deadlock, cannot continue.&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">isConnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns `True` if the Client is connected to Touch Portal, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isActionBeingHeld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For an Action with ID of `actionId` that can be held (`hasHoldFunctionality` is true),</span>
<span class="sd">        this method returns `True` while it is being held and `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">actionId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span>

    <span class="k">def</span> <span class="nf">createState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will create a TP State at runtime. `stateId`, `description`, and `value` are all required (`value` becomes the State&#39;s default value).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">description</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stateId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;createState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span> <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to create several States at once. `states` should be an iteratable of `dict` types</span>
<span class="sd">        in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;desc&#39;: &quot;Description&quot;, &#39;value&#39;: &quot;Default Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createState</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;desc&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">validateExists</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This removes a State that has been created at runtime. `stateId` is the ID to remove.</span>
<span class="sd">        If `validateExists` is True (default) this method will raise an Exception if the `stateId`</span>
<span class="sd">        does not exist in the current state cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">stateId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;removeState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">stateId</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">validateExists</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stateId</span><span class="si">}</span><span class="s2"> Does not exist.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to remove several States at once. `states` should be an iteratable of state ID strings.</span>
<span class="sd">        This method does not validate if the states exist in the current state cache. See also: `removeState`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">removeState</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;removeStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">choiceUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choiceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates the list of choices in a previously-declared TP State with id `stateId`.</span>
<span class="sd">        See TP API reference for details on updating list values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">choiceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">choiceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdate() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">choiceUpdateSpecific</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a list of choices in a specific TP Item Instance, specified in `instanceId`.</span>
<span class="sd">        See TP API reference for details on updating specific instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">instanceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdateSpecific() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">settingUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settingName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">settingValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value named `settingName` in your plugin&#39;s Settings to `settingValue`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">settingName</span> <span class="ow">and</span> <span class="n">settingName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">!=</span> <span class="n">settingValue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;settingUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">settingName</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">settingValue</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">=</span> <span class="n">settingValue</span>

    <span class="k">def</span> <span class="nf">stateUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value in ether a pre-defined static State or a dynamic State created in runtime.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__stateUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">forced</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">stateId</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">forced</span> <span class="ow">or</span> <span class="n">stateId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">!=</span> <span class="n">stateValue</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stateUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">stateValue</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">=</span> <span class="n">stateValue</span>

    <span class="k">def</span> <span class="nf">stateUpdateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to update several states at once.</span>
<span class="sd">        `states` should be an iteratable of `dict` types in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;value&#39;: &quot;The New Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">showNotification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notificationId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method allows your plugin to send a notification to Touch Portal with custom title, message body and available user action(s).</span>
<span class="sd">        Requires TP SDK v4.0 or higher.</span>

<span class="sd">        Args:</span>
<span class="sd">            `notificationId`: Unique ID of this notification.</span>
<span class="sd">            `title`: The notification title.</span>
<span class="sd">            `msg`: The message body text that is shown in the notifcation.</span>
<span class="sd">            `options`: List of options (actions) for the notification. Each option should be a `dict` type with `id` and `title` keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">notificationId</span> <span class="ow">and</span> <span class="n">title</span> <span class="ow">and</span> <span class="n">msg</span> <span class="ow">and</span> <span class="n">options</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;title&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;all options require id and title keys&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;showNotification&quot;</span><span class="p">,</span>
                <span class="s2">&quot;notificationId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">notificationId</span><span class="p">),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">),</span>
                <span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">options</span>
            <span class="p">})</span>

    <span class="k">def</span> <span class="nf">connectorUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connectorId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">connectorValue</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update slider position value.</span>

<span class="sd">        Args:</span>
<span class="sd">            `connectorId`: Cannot be longer then 200 characters.</span>
<span class="sd">            `connectorValue`: Must be an integer between 0-100.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorId</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorId needs to be a str not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorId</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue requires a int not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">connectorValue</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connectorUpdate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;connectorId&quot;</span><span class="p">:</span> <span class="n">connectorId</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">connectorValue</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue needs to be between 0-100 not </span><span class="si">{</span><span class="n">connectorValue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">updateActionData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update Action Data in one of your Action. Currently TouchPortal only supports changing the minimum and maximum values in numeric data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;updateActionData&quot;</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;minValue&quot;</span><span class="p">:</span> <span class="n">minValue</span><span class="p">,</span> <span class="s2">&quot;maxValue&quot;</span><span class="p">:</span> <span class="n">maxValue</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}})</span>

    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will try to send any arbitrary Python object in `data` (presumably something `dict`-like) to Touch Portal</span>
<span class="sd">        after serializing it as JSON and adding a `\n`. Normally there is no need to use this method directly, but if the</span>
<span class="sd">        Python API doesn&#39;t cover something from the TP API, this could be used instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getWriteLock</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">SND_BUFFER_SZ</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">ResourceWarning</span><span class="p">(</span><span class="s2">&quot;TP Client send buffer is full!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">+=</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initiate connection to TP Server.</span>
<span class="sd">        If successful, it starts the main processing loop of this client.</span>
<span class="sd">        Does nothing if client is already connected.</span>

<span class="sd">        **Note** that `connect()` blocks further execution of your script until one of the following occurs:</span>
<span class="sd">          - `disconnect()` is called in an event handler,</span>
<span class="sd">          - TP sends `closePlugin` message and `autoClose` is `True`</span>
<span class="sd">          - or an internal error occurs (for example Touch Portal disconnects unexpectedly)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__open</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;pair&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__run</span><span class="p">()</span>  <span class="c1"># start the event loop</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This closes the connection to TP and terminates the client processing loop.</span>
<span class="sd">        Does nothing if client is already disconnected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getActionDataValue</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">valueId</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility for processing action messages from TP. For example:</span>
<span class="sd">            {&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: [{ &quot;id&quot;: &quot;data object id&quot;, &quot;value&quot;: &quot;user specified value&quot; }, ...]}</span>

<span class="sd">        Returns the `value` with specific `id` from a list of action data,</span>
<span class="sd">        or `None` if the `id` wasn&#39;t found. If a null id is passed in `valueId`</span>
<span class="sd">        then the first entry which has a `value` key, if any, will be returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            `data`: the &quot;data&quot; array from a TP &quot;action&quot;, &quot;on&quot;, or &quot;off&quot; message</span>
<span class="sd">            `valueId`: the &quot;id&quot; to look for in `data`. `None` or blank to return the first value found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">valueId</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">valueId</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

        </details>

            </section>
                <section id="Client">
                                <div class="attr class">
        <a class="headerlink" href="#Client">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Client</span><wbr>(<span class="base">pyee._executor.ExecutorEventEmitter</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">ExecutorEventEmitter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A TCP/IP client for [Touch Portal API](https://www.touch-portal.com/api) plugin integration.</span>
<span class="sd">    Implements a [pyee.ExecutorEventEmitter](https://pyee.readthedocs.io/en/latest/#pyee.ExecutorEventEmitter).</span>

<span class="sd">    After an initial connection to a Touch Portal desktop application &quot;server,&quot; the client</span>
<span class="sd">    implements a send/receive event loop while maintaining the open sockets. Messages between</span>
<span class="sd">    TP and the plugin are exchanged asynchronously, with all sending methods possibly returning</span>
<span class="sd">    before the actual data is sent.</span>

<span class="sd">    Messages from Touch Portal are delivered to the plugin script via event handler callbacks,</span>
<span class="sd">    which can be either individual callbacks per message type, and/or a single handler for all</span>
<span class="sd">    types of messages. The callbacks are executed in separate Thread(s), using a pool of up to</span>
<span class="sd">    any number of concurrent threads as needed (if using more than one thread, the plugin</span>
<span class="sd">    code itself is responsible for thread safety of its internal data). Please check the</span>
<span class="sd">    `pyee.EventEmitter` documentation for general information on how events are handled</span>
<span class="sd">    (which can be either via function decorators or via the inherited `Client.on()` method).</span>

<span class="sd">    Generated event names correspond to Touch Portal API message types, one for each type</span>
<span class="sd">    as defined in the TP API documentation (eg. &quot;action&quot; or &quot;listChange&quot;) as well as one event</span>
<span class="sd">    which is generated for all message types (&quot;any&quot;). Alternately, for a more formal approach,</span>
<span class="sd">    the corresponding members of the `TYPES` class could be used instead of string names</span>
<span class="sd">    (eg. `TYPES.onAction` or `TYPES.onListChange`).</span>

<span class="sd">    Any errors raised within event listeners/handlers are trapped and then reported in the</span>
<span class="sd">    inherited &quot;error&quot; event (from pyee.ExecutorEventEmitter), aka `TYPES.onError`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TPHOST</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span>
    <span class="sd">&quot;&quot;&quot; TP plugin server host IPv4 address. &quot;&quot;&quot;</span>
    <span class="n">TPPORT</span> <span class="o">=</span> <span class="mi">12136</span>
    <span class="sd">&quot;&quot;&quot; TP plugin server host IPv4 port number. &quot;&quot;&quot;</span>
    <span class="n">RCV_BUFFER_SZ</span> <span class="o">=</span> <span class="mi">4096</span>
    <span class="sd">&quot;&quot;&quot; [B] incoming data buffer size. &quot;&quot;&quot;</span>
    <span class="n">SND_BUFFER_SZ</span> <span class="o">=</span> <span class="mi">32</span><span class="o">**</span><span class="mi">4</span>
    <span class="sd">&quot;&quot;&quot; [B] maximum size of send data buffer (1MB). &quot;&quot;&quot;</span>
    <span class="n">SOCK_EVENT_TO</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="sd">&quot;&quot;&quot; [s] maximum wait time for socket events (blocking timeout for selector.select()). &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
                 <span class="n">sleepPeriod</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
                 <span class="n">autoClose</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">checkPluginId</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">updateStatesOnBroadcast</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">maxWorkers</span><span class="p">:</span><span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">executor</span><span class="p">:</span><span class="n">Executor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an instance of the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            `pluginId`: ID string of the TouchPortal plugin using this client. **Required.**</span>
<span class="sd">            `sleepPeriod`: Seconds to sleep the event loop between socket read events. Default: 0.01</span>
<span class="sd">            `autoClose`: If `True` then this client will automatically disconnect when a `closePlugin` message is received from TP.</span>
<span class="sd">                Default is `False`.</span>
<span class="sd">            `checkPluginId`: Validate that `pluginId` matches ours in any messages from TP which contain one (such as actions).</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `updateStatesOnBroadcast`: Re-send all cached State values whenever user switches TP page.</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `maxWorkers`: Maximum worker threads to run concurrently for event handlers.</span>
<span class="sd">                Default of `None` creates a default-constructed `ThreadPoolExecutor`.</span>
<span class="sd">            `executor`: Passed to `pyee.ExecutorEventEmitter`. By default this is a default-constructed</span>
<span class="sd">                [ThreadPoolExecutor](https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor),</span>
<span class="sd">                optionally using `maxWorkers` concurrent threads.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">executor</span> <span class="ow">and</span> <span class="n">maxWorkers</span><span class="p">:</span>
            <span class="n">executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">maxWorkers</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="n">executor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span> <span class="o">=</span> <span class="n">pluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sleepPeriod</span> <span class="o">=</span> <span class="n">sleepPeriod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoClose</span> <span class="o">=</span> <span class="n">autoClose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkPluginId</span> <span class="o">=</span> <span class="n">checkPluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStatesOnBroadcast</span> <span class="o">=</span> <span class="n">updateStatesOnBroadcast</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>       <span class="c1"># main loop inerrupt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>           <span class="c1"># not running yet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>  <span class="c1"># set when __sendBuffer has data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>        <span class="c1"># mutex for __sendBuffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__buffered_readLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Should be ready to read</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RCV_BUFFER_SZ</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">raise</span>  <span class="c1"># No connection</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span> <span class="o">+=</span> <span class="n">data</span>
                <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="p">[:</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">lines</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># No connection</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Peer closed the connection.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getWriteLock</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Should be ready to write</span>
                <span class="n">sent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Resource temporarily unavailable (errno EWOULDBLOCK)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="k">raise</span>  <span class="c1"># No connection</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">[:</span><span class="n">sent</span><span class="p">]</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="n">events</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SOCK_EVENT_TO</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>  <span class="c1"># may be set while waiting for selector events (unlikely)</span>
                    <span class="k">break</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__buffered_readLine</span><span class="p">():</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__processMessage</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__write</span><span class="p">()</span>
                <span class="c1"># Sleep for period or until there is data in the write buffer.</span>
                <span class="c1"># In theory if data is constantly avaiable, this could block,</span>
                <span class="c1"># in which case it may be better to self.__stopEvent.wait()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sleepPeriod</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__die</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception in client event loop: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__processMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">and</span> <span class="p">(</span><span class="n">act_type</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkPluginId</span> <span class="ow">and</span> <span class="p">(</span><span class="n">pid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pluginId&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="n">pid</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoClose</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onHold_down</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actionId&#39;</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span><span class="p">[</span><span class="n">aid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onHold_up</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aid</span> <span class="o">:=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actionId&#39;</span><span class="p">)):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span><span class="p">[</span><span class="n">aid</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">act_type</span> <span class="o">==</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onBroadcast</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateStatesOnBroadcast</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__stateUpdate</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__emitEvent</span><span class="p">(</span><span class="n">act_type</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__emitEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">TYPES</span><span class="o">.</span><span class="n">allMessage</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">DefaultSelector</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">TPHOST</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TPPORT</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">raise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="p">(</span><span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_READ</span> <span class="o">|</span> <span class="n">selectors</span><span class="o">.</span><span class="n">EVENT_WRITE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">get_map</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in selector.unregister(): </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SHUT_RDWR</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in socket.close(): </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Delete reference to socket object for garbage collection, socket cannot be reused anyway.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># print(&quot;TP Client stopped.&quot;)</span>

    <span class="k">def</span> <span class="nf">__die</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__emitEvent</span><span class="p">(</span><span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">TYPES</span><span class="o">.</span><span class="n">onShutdown</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">exc</span><span class="p">:</span> <span class="k">raise</span> <span class="n">exc</span>

    <span class="k">def</span> <span class="nf">__getWriteLock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__die</span><span class="p">(</span><span class="n">exc</span><span class="o">=</span><span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Send buffer mutex deadlock, cannot continue.&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">isConnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns `True` if the Client is connected to Touch Portal, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isActionBeingHeld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For an Action with ID of `actionId` that can be held (`hasHoldFunctionality` is true),</span>
<span class="sd">        this method returns `True` while it is being held and `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">actionId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span>

    <span class="k">def</span> <span class="nf">createState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will create a TP State at runtime. `stateId`, `description`, and `value` are all required (`value` becomes the State&#39;s default value).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">description</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stateId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;createState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span> <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to create several States at once. `states` should be an iteratable of `dict` types</span>
<span class="sd">        in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;desc&#39;: &quot;Description&quot;, &#39;value&#39;: &quot;Default Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createState</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;desc&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">validateExists</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This removes a State that has been created at runtime. `stateId` is the ID to remove.</span>
<span class="sd">        If `validateExists` is True (default) this method will raise an Exception if the `stateId`</span>
<span class="sd">        does not exist in the current state cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">stateId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;removeState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">stateId</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">validateExists</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stateId</span><span class="si">}</span><span class="s2"> Does not exist.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to remove several States at once. `states` should be an iteratable of state ID strings.</span>
<span class="sd">        This method does not validate if the states exist in the current state cache. See also: `removeState`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">removeState</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;removeStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">choiceUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choiceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates the list of choices in a previously-declared TP State with id `stateId`.</span>
<span class="sd">        See TP API reference for details on updating list values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">choiceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">choiceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdate() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">choiceUpdateSpecific</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a list of choices in a specific TP Item Instance, specified in `instanceId`.</span>
<span class="sd">        See TP API reference for details on updating specific instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">instanceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdateSpecific() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">settingUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settingName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">settingValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value named `settingName` in your plugin&#39;s Settings to `settingValue`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">settingName</span> <span class="ow">and</span> <span class="n">settingName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">!=</span> <span class="n">settingValue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;settingUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">settingName</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">settingValue</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">=</span> <span class="n">settingValue</span>

    <span class="k">def</span> <span class="nf">stateUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value in ether a pre-defined static State or a dynamic State created in runtime.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__stateUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">forced</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">stateId</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">forced</span> <span class="ow">or</span> <span class="n">stateId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">!=</span> <span class="n">stateValue</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stateUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">stateValue</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">=</span> <span class="n">stateValue</span>

    <span class="k">def</span> <span class="nf">stateUpdateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to update several states at once.</span>
<span class="sd">        `states` should be an iteratable of `dict` types in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;value&#39;: &quot;The New Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">showNotification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notificationId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method allows your plugin to send a notification to Touch Portal with custom title, message body and available user action(s).</span>
<span class="sd">        Requires TP SDK v4.0 or higher.</span>

<span class="sd">        Args:</span>
<span class="sd">            `notificationId`: Unique ID of this notification.</span>
<span class="sd">            `title`: The notification title.</span>
<span class="sd">            `msg`: The message body text that is shown in the notifcation.</span>
<span class="sd">            `options`: List of options (actions) for the notification. Each option should be a `dict` type with `id` and `title` keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">notificationId</span> <span class="ow">and</span> <span class="n">title</span> <span class="ow">and</span> <span class="n">msg</span> <span class="ow">and</span> <span class="n">options</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;title&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;all options require id and title keys&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;showNotification&quot;</span><span class="p">,</span>
                <span class="s2">&quot;notificationId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">notificationId</span><span class="p">),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">),</span>
                <span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">options</span>
            <span class="p">})</span>

    <span class="k">def</span> <span class="nf">connectorUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connectorId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">connectorValue</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update slider position value.</span>

<span class="sd">        Args:</span>
<span class="sd">            `connectorId`: Cannot be longer then 200 characters.</span>
<span class="sd">            `connectorValue`: Must be an integer between 0-100.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorId</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorId needs to be a str not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorId</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue requires a int not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">connectorValue</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connectorUpdate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;connectorId&quot;</span><span class="p">:</span> <span class="n">connectorId</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">connectorValue</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue needs to be between 0-100 not </span><span class="si">{</span><span class="n">connectorValue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">updateActionData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update Action Data in one of your Action. Currently TouchPortal only supports changing the minimum and maximum values in numeric data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;updateActionData&quot;</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;minValue&quot;</span><span class="p">:</span> <span class="n">minValue</span><span class="p">,</span> <span class="s2">&quot;maxValue&quot;</span><span class="p">:</span> <span class="n">maxValue</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}})</span>

    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will try to send any arbitrary Python object in `data` (presumably something `dict`-like) to Touch Portal</span>
<span class="sd">        after serializing it as JSON and adding a `\n`. Normally there is no need to use this method directly, but if the</span>
<span class="sd">        Python API doesn&#39;t cover something from the TP API, this could be used instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getWriteLock</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">SND_BUFFER_SZ</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">ResourceWarning</span><span class="p">(</span><span class="s2">&quot;TP Client send buffer is full!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">+=</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initiate connection to TP Server.</span>
<span class="sd">        If successful, it starts the main processing loop of this client.</span>
<span class="sd">        Does nothing if client is already connected.</span>

<span class="sd">        **Note** that `connect()` blocks further execution of your script until one of the following occurs:</span>
<span class="sd">          - `disconnect()` is called in an event handler,</span>
<span class="sd">          - TP sends `closePlugin` message and `autoClose` is `True`</span>
<span class="sd">          - or an internal error occurs (for example Touch Portal disconnects unexpectedly)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__open</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;pair&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__run</span><span class="p">()</span>  <span class="c1"># start the event loop</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This closes the connection to TP and terminates the client processing loop.</span>
<span class="sd">        Does nothing if client is already disconnected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getActionDataValue</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">valueId</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility for processing action messages from TP. For example:</span>
<span class="sd">            {&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: [{ &quot;id&quot;: &quot;data object id&quot;, &quot;value&quot;: &quot;user specified value&quot; }, ...]}</span>

<span class="sd">        Returns the `value` with specific `id` from a list of action data,</span>
<span class="sd">        or `None` if the `id` wasn&#39;t found. If a null id is passed in `valueId`</span>
<span class="sd">        then the first entry which has a `value` key, if any, will be returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            `data`: the &quot;data&quot; array from a TP &quot;action&quot;, &quot;on&quot;, or &quot;off&quot; message</span>
<span class="sd">            `valueId`: the &quot;id&quot; to look for in `data`. `None` or blank to return the first value found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">valueId</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">valueId</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>A TCP/IP client for <a href="https://www.touch-portal.com/api">Touch Portal API</a> plugin integration.
Implements a <a href="https://pyee.readthedocs.io/en/latest/#pyee.ExecutorEventEmitter">pyee.ExecutorEventEmitter</a>.</p>

<p>After an initial connection to a Touch Portal desktop application "server," the client
implements a send/receive event loop while maintaining the open sockets. Messages between
TP and the plugin are exchanged asynchronously, with all sending methods possibly returning
before the actual data is sent.</p>

<p>Messages from Touch Portal are delivered to the plugin script via event handler callbacks,
which can be either individual callbacks per message type, and/or a single handler for all
types of messages. The callbacks are executed in separate Thread(s), using a pool of up to
any number of concurrent threads as needed (if using more than one thread, the plugin
code itself is responsible for thread safety of its internal data). Please check the
<code>pyee.EventEmitter</code> documentation for general information on how events are handled
(which can be either via function decorators or via the inherited <code><a href="#Client.on">Client.on()</a></code> method).</p>

<p>Generated event names correspond to Touch Portal API message types, one for each type
as defined in the TP API documentation (eg. "action" or "listChange") as well as one event
which is generated for all message types ("any"). Alternately, for a more formal approach,
the corresponding members of the <code><a href="#TYPES">TYPES</a></code> class could be used instead of string names
(eg. <code><a href="#TYPES.onAction">TYPES.onAction</a></code> or <code><a href="#TYPES.onListChange">TYPES.onListChange</a></code>).</p>

<p>Any errors raised within event listeners/handlers are trapped and then reported in the
inherited "error" event (from pyee.ExecutorEventEmitter), aka <code><a href="#TYPES.onError">TYPES.onError</a></code>.</p>
</div>


                            <div id="Client.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Client</span><span class="signature">(
    pluginId: str,
    sleepPeriod: float = 0.01,
    autoClose: bool = False,
    checkPluginId: bool = True,
    updateStatesOnBroadcast: bool = True,
    maxWorkers: int = None,
    executor: concurrent.futures._base.Executor = None
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
                 <span class="n">sleepPeriod</span><span class="p">:</span><span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
                 <span class="n">autoClose</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">checkPluginId</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">updateStatesOnBroadcast</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">maxWorkers</span><span class="p">:</span><span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">executor</span><span class="p">:</span><span class="n">Executor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an instance of the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            `pluginId`: ID string of the TouchPortal plugin using this client. **Required.**</span>
<span class="sd">            `sleepPeriod`: Seconds to sleep the event loop between socket read events. Default: 0.01</span>
<span class="sd">            `autoClose`: If `True` then this client will automatically disconnect when a `closePlugin` message is received from TP.</span>
<span class="sd">                Default is `False`.</span>
<span class="sd">            `checkPluginId`: Validate that `pluginId` matches ours in any messages from TP which contain one (such as actions).</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `updateStatesOnBroadcast`: Re-send all cached State values whenever user switches TP page.</span>
<span class="sd">                Default is `True`.</span>
<span class="sd">            `maxWorkers`: Maximum worker threads to run concurrently for event handlers.</span>
<span class="sd">                Default of `None` creates a default-constructed `ThreadPoolExecutor`.</span>
<span class="sd">            `executor`: Passed to `pyee.ExecutorEventEmitter`. By default this is a default-constructed</span>
<span class="sd">                [ThreadPoolExecutor](https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor),</span>
<span class="sd">                optionally using `maxWorkers` concurrent threads.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">executor</span> <span class="ow">and</span> <span class="n">maxWorkers</span><span class="p">:</span>
            <span class="n">executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">maxWorkers</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">executor</span><span class="o">=</span><span class="n">executor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span> <span class="o">=</span> <span class="n">pluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sleepPeriod</span> <span class="o">=</span> <span class="n">sleepPeriod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoClose</span> <span class="o">=</span> <span class="n">autoClose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkPluginId</span> <span class="o">=</span> <span class="n">checkPluginId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStatesOnBroadcast</span> <span class="o">=</span> <span class="n">updateStatesOnBroadcast</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>       <span class="c1"># main loop inerrupt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>           <span class="c1"># not running yet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>  <span class="c1"># set when __sendBuffer has data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>        <span class="c1"># mutex for __sendBuffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recvBuffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Creates an instance of the client.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong><code>pluginId</code>:</strong>  ID string of the TouchPortal plugin using this client. <strong>Required.</strong></li>
<li><strong><code>sleepPeriod</code>:</strong>  Seconds to sleep the event loop between socket read events. Default: 0.01</li>
<li><strong><code>autoClose</code>:</strong>  If <code>True</code> then this client will automatically disconnect when a <code>closePlugin</code> message is received from TP.
Default is <code>False</code>.</li>
<li><strong><code>checkPluginId</code>:</strong>  Validate that <code>pluginId</code> matches ours in any messages from TP which contain one (such as actions).
Default is <code>True</code>.</li>
<li><strong><code>updateStatesOnBroadcast</code>:</strong>  Re-send all cached State values whenever user switches TP page.
Default is <code>True</code>.</li>
<li><strong><code>maxWorkers</code>:</strong>  Maximum worker threads to run concurrently for event handlers.
Default of <code>None</code> creates a default-constructed <code>ThreadPoolExecutor</code>.</li>
<li><strong><code>executor</code>:</strong>  Passed to <code>pyee.ExecutorEventEmitter</code>. By default this is a default-constructed
<a href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor">ThreadPoolExecutor</a>,
optionally using <code>maxWorkers</code> concurrent threads.</li>
</ul>
</div>


                            </div>
                            <div id="Client.TPHOST" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Client.TPHOST">#&nbsp;&nbsp</a>

        <span class="name">TPHOST</span><span class="default_value"> = &#39;127.0.0.1&#39;</span>
    </div>

            <div class="docstring"><p>TP plugin server host IPv4 address.</p>
</div>


                            </div>
                            <div id="Client.TPPORT" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Client.TPPORT">#&nbsp;&nbsp</a>

        <span class="name">TPPORT</span><span class="default_value"> = 12136</span>
    </div>

            <div class="docstring"><p>TP plugin server host IPv4 port number.</p>
</div>


                            </div>
                            <div id="Client.RCV_BUFFER_SZ" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Client.RCV_BUFFER_SZ">#&nbsp;&nbsp</a>

        <span class="name">RCV_BUFFER_SZ</span><span class="default_value"> = 4096</span>
    </div>

            <div class="docstring"><p>[B] incoming data buffer size.</p>
</div>


                            </div>
                            <div id="Client.SND_BUFFER_SZ" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Client.SND_BUFFER_SZ">#&nbsp;&nbsp</a>

        <span class="name">SND_BUFFER_SZ</span><span class="default_value"> = 1048576</span>
    </div>

            <div class="docstring"><p>[B] maximum size of send data buffer (1MB).</p>
</div>


                            </div>
                            <div id="Client.SOCK_EVENT_TO" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Client.SOCK_EVENT_TO">#&nbsp;&nbsp</a>

        <span class="name">SOCK_EVENT_TO</span><span class="default_value"> = 1.0</span>
    </div>

            <div class="docstring"><p>[s] maximum wait time for socket events (blocking timeout for selector.select()).</p>
</div>


                            </div>
                            <div id="Client.isConnected" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.isConnected">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">isConnected</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">isConnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns `True` if the Client is connected to Touch Portal, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stopEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns <code>True</code> if the Client is connected to Touch Portal, <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Client.isActionBeingHeld" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.isActionBeingHeld">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">isActionBeingHeld</span><span class="signature">(self, actionId: str)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">isActionBeingHeld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For an Action with ID of `actionId` that can be held (`hasHoldFunctionality` is true),</span>
<span class="sd">        this method returns `True` while it is being held and `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">actionId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__heldActions</span>
</pre></div>

        </details>

            <div class="docstring"><p>For an Action with ID of <code>actionId</code> that can be held (<code>hasHoldFunctionality</code> is true),
this method returns <code>True</code> while it is being held and <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Client.createState" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.createState">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">createState</span><span class="signature">(self, stateId: str, description: str, value: str)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">createState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will create a TP State at runtime. `stateId`, `description`, and `value` are all required (`value` becomes the State&#39;s default value).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">description</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stateId</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;createState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span> <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This will create a TP State at runtime. <code>stateId</code>, <code>description</code>, and <code>value</code> are all required (<code>value</code> becomes the State's default value).</p>
</div>


                            </div>
                            <div id="Client.createStateMany" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.createStateMany">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">createStateMany</span><span class="signature">(self, states: list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">createStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to create several States at once. `states` should be an iteratable of `dict` types</span>
<span class="sd">        in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;desc&#39;: &quot;Description&quot;, &#39;value&#39;: &quot;Default Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createState</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;desc&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;createStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Convenience function to create several States at once. <code>states</code> should be an iteratable of <code>dict</code> types
in the form of <code>{'id': "StateId", 'desc': "Description", 'value': "Default Value"}</code>.</p>
</div>


                            </div>
                            <div id="Client.removeState" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.removeState">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">removeState</span><span class="signature">(self, stateId: str, validateExists=True)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">removeState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">validateExists</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This removes a State that has been created at runtime. `stateId` is the ID to remove.</span>
<span class="sd">        If `validateExists` is True (default) this method will raise an Exception if the `stateId`</span>
<span class="sd">        does not exist in the current state cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">stateId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;removeState&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentStates</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">stateId</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">validateExists</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stateId</span><span class="si">}</span><span class="s2"> Does not exist.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This removes a State that has been created at runtime. <code>stateId</code> is the ID to remove.
If <code>validateExists</code> is True (default) this method will raise an Exception if the <code>stateId</code>
does not exist in the current state cache.</p>
</div>


                            </div>
                            <div id="Client.removeStateMany" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.removeStateMany">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">removeStateMany</span><span class="signature">(self, states: list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">removeStateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to remove several States at once. `states` should be an iteratable of state ID strings.</span>
<span class="sd">        This method does not validate if the states exist in the current state cache. See also: `removeState`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">removeState</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;removeStateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Convenience function to remove several States at once. <code>states</code> should be an iteratable of state ID strings.
This method does not validate if the states exist in the current state cache. See also: <code><a href="#Client.removeState">removeState</a></code>.</p>
</div>


                            </div>
                            <div id="Client.choiceUpdate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.choiceUpdate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">choiceUpdate</span><span class="signature">(self, choiceId: str, values: list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">choiceUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choiceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates the list of choices in a previously-declared TP State with id `stateId`.</span>
<span class="sd">        See TP API reference for details on updating list values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">choiceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">choiceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdate() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This updates the list of choices in a previously-declared TP State with id <code>stateId</code>.
See TP API reference for details on updating list values.</p>
</div>


                            </div>
                            <div id="Client.choiceUpdateSpecific" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.choiceUpdateSpecific">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">choiceUpdateSpecific</span><span class="signature">(self, stateId: str, values: list, instanceId: str)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">choiceUpdateSpecific</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a list of choices in a specific TP Item Instance, specified in `instanceId`.</span>
<span class="sd">        See TP API reference for details on updating specific instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stateId</span> <span class="ow">and</span> <span class="n">instanceId</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;choiceUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;choiceUpdateSpecific() values argument needs to be a list not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This updates a list of choices in a specific TP Item Instance, specified in <code>instanceId</code>.
See TP API reference for details on updating specific instances.</p>
</div>


                            </div>
                            <div id="Client.settingUpdate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.settingUpdate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">settingUpdate</span><span class="signature">(self, settingName: str, settingValue)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">settingUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settingName</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">settingValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value named `settingName` in your plugin&#39;s Settings to `settingValue`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">settingName</span> <span class="ow">and</span> <span class="n">settingName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">!=</span> <span class="n">settingValue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;settingUpdate&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">settingName</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">settingValue</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentSettings</span><span class="p">[</span><span class="n">settingName</span><span class="p">]</span> <span class="o">=</span> <span class="n">settingValue</span>
</pre></div>

        </details>

            <div class="docstring"><p>This updates a value named <code>settingName</code> in your plugin's Settings to <code>settingValue</code>.</p>
</div>


                            </div>
                            <div id="Client.stateUpdate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.stateUpdate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stateUpdate</span><span class="signature">(self, stateId: str, stateValue: str)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stateUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This updates a value in ether a pre-defined static State or a dynamic State created in runtime.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stateUpdate</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">stateValue</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This updates a value in ether a pre-defined static State or a dynamic State created in runtime.</p>
</div>


                            </div>
                            <div id="Client.stateUpdateMany" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.stateUpdateMany">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stateUpdateMany</span><span class="signature">(self, states: list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stateUpdateMany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">states</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function to update several states at once.</span>
<span class="sd">        `states` should be an iteratable of `dict` types in the form of `{&#39;id&#39;: &quot;StateId&quot;, &#39;value&#39;: &quot;The New Value&quot;}`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stateUpdate</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires a list of dicts, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;StateUpdateMany() requires an iteratable, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">states</span><span class="p">)</span><span class="si">}</span><span class="s1"> instead.&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Convenience function to update several states at once.
<code>states</code> should be an iteratable of <code>dict</code> types in the form of <code>{'id': "StateId", 'value': "The New Value"}</code>.</p>
</div>


                            </div>
                            <div id="Client.showNotification" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.showNotification">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">showNotification</span><span class="signature">(self, notificationId: str, title: str, msg: str, options: list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">showNotification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notificationId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method allows your plugin to send a notification to Touch Portal with custom title, message body and available user action(s).</span>
<span class="sd">        Requires TP SDK v4.0 or higher.</span>

<span class="sd">        Args:</span>
<span class="sd">            `notificationId`: Unique ID of this notification.</span>
<span class="sd">            `title`: The notification title.</span>
<span class="sd">            `msg`: The message body text that is shown in the notifcation.</span>
<span class="sd">            `options`: List of options (actions) for the notification. Each option should be a `dict` type with `id` and `title` keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">notificationId</span> <span class="ow">and</span> <span class="n">title</span> <span class="ow">and</span> <span class="n">msg</span> <span class="ow">and</span> <span class="n">options</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;title&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;all options require id and title keys&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;showNotification&quot;</span><span class="p">,</span>
                <span class="s2">&quot;notificationId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">notificationId</span><span class="p">),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">),</span>
                <span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">options</span>
            <span class="p">})</span>
</pre></div>

        </details>

            <div class="docstring"><p>This method allows your plugin to send a notification to Touch Portal with custom title, message body and available user action(s).
Requires TP SDK v4.0 or higher.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong><code>notificationId</code>:</strong>  Unique ID of this notification.</li>
<li><strong><code>title</code>:</strong>  The notification title.</li>
<li><strong><code>msg</code>:</strong>  The message body text that is shown in the notifcation.</li>
<li><strong><code>options</code>:</strong>  List of options (actions) for the notification. Each option should be a <code>dict</code> type with <code>id</code> and <code>title</code> keys.</li>
</ul>
</div>


                            </div>
                            <div id="Client.connectorUpdate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.connectorUpdate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">connectorUpdate</span><span class="signature">(self, connectorId: str, connectorValue: int)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">connectorUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connectorId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">connectorValue</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update slider position value.</span>

<span class="sd">        Args:</span>
<span class="sd">            `connectorId`: Cannot be longer then 200 characters.</span>
<span class="sd">            `connectorValue`: Must be an integer between 0-100.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorId</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorId needs to be a str not a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorId</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue requires a int not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">connectorValue</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">connectorValue</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connectorUpdate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;connectorId&quot;</span><span class="p">:</span> <span class="n">connectorId</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">connectorValue</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;connectorValue needs to be between 0-100 not </span><span class="si">{</span><span class="n">connectorValue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This allows you to update slider position value.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong><code>connectorId</code>:</strong>  Cannot be longer then 200 characters.</li>
<li><strong><code>connectorValue</code>:</strong>  Must be an integer between 0-100.</li>
</ul>
</div>


                            </div>
                            <div id="Client.updateActionData" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.updateActionData">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">updateActionData</span><span class="signature">(self, instanceId: str, stateId: str, minValue, maxValue)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">updateActionData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instanceId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">stateId</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This allows you to update Action Data in one of your Action. Currently TouchPortal only supports changing the minimum and maximum values in numeric data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;updateActionData&quot;</span><span class="p">,</span> <span class="s2">&quot;instanceId&quot;</span><span class="p">:</span> <span class="n">instanceId</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;minValue&quot;</span><span class="p">:</span> <span class="n">minValue</span><span class="p">,</span> <span class="s2">&quot;maxValue&quot;</span><span class="p">:</span> <span class="n">maxValue</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">stateId</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}})</span>
</pre></div>

        </details>

            <div class="docstring"><p>This allows you to update Action Data in one of your Action. Currently TouchPortal only supports changing the minimum and maximum values in numeric data types.</p>
</div>


                            </div>
                            <div id="Client.send" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.send">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">send</span><span class="signature">(self, data)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will try to send any arbitrary Python object in `data` (presumably something `dict`-like) to Touch Portal</span>
<span class="sd">        after serializing it as JSON and adding a `\n`. Normally there is no need to use this method directly, but if the</span>
<span class="sd">        Python API doesn&#39;t cover something from the TP API, this could be used instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getWriteLock</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">SND_BUFFER_SZ</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">ResourceWarning</span><span class="p">(</span><span class="s2">&quot;TP Client send buffer is full!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__sendBuffer</span> <span class="o">+=</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__writeLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dataReadyEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>This will try to send any arbitrary Python object in <code>data</code> (presumably something <code>dict</code>-like) to Touch Portal
        after serializing it as JSON and adding a <code>
</code>. Normally there is no need to use this method directly, but if the
        Python API doesn't cover something from the TP API, this could be used instead.</p>
</div>


                            </div>
                            <div id="Client.connect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.connect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">connect</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initiate connection to TP Server.</span>
<span class="sd">        If successful, it starts the main processing loop of this client.</span>
<span class="sd">        Does nothing if client is already connected.</span>

<span class="sd">        **Note** that `connect()` blocks further execution of your script until one of the following occurs:</span>
<span class="sd">          - `disconnect()` is called in an event handler,</span>
<span class="sd">          - TP sends `closePlugin` message and `autoClose` is `True`</span>
<span class="sd">          - or an internal error occurs (for example Touch Portal disconnects unexpectedly)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__open</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;pair&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginId</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__run</span><span class="p">()</span>  <span class="c1"># start the event loop</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initiate connection to TP Server.
If successful, it starts the main processing loop of this client.
Does nothing if client is already connected.</p>

<p><strong>Note</strong> that <code><a href="#Client.connect">connect()</a></code> blocks further execution of your script until one of the following occurs:</p>

<ul>
<li><code><a href="#Client.disconnect">disconnect()</a></code> is called in an event handler,</li>
<li>TP sends <code>closePlugin</code> message and <code>autoClose</code> is <code>True</code></li>
<li>or an internal error occurs (for example Touch Portal disconnects unexpectedly)</li>
</ul>
</div>


                            </div>
                            <div id="Client.disconnect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.disconnect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">disconnect</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This closes the connection to TP and terminates the client processing loop.</span>
<span class="sd">        Does nothing if client is already disconnected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__close</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>This closes the connection to TP and terminates the client processing loop.
Does nothing if client is already disconnected.</p>
</div>


                            </div>
                            <div id="Client.getActionDataValue" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Client.getActionDataValue">#&nbsp;&nbsp</a>

                <div class="decorator">@staticmethod</div>

            <span class="def">def</span>
            <span class="name">getActionDataValue</span><span class="signature">(data: list, valueId: str = None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getActionDataValue</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span> <span class="n">valueId</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility for processing action messages from TP. For example:</span>
<span class="sd">            {&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: [{ &quot;id&quot;: &quot;data object id&quot;, &quot;value&quot;: &quot;user specified value&quot; }, ...]}</span>

<span class="sd">        Returns the `value` with specific `id` from a list of action data,</span>
<span class="sd">        or `None` if the `id` wasn&#39;t found. If a null id is passed in `valueId`</span>
<span class="sd">        then the first entry which has a `value` key, if any, will be returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            `data`: the &quot;data&quot; array from a TP &quot;action&quot;, &quot;on&quot;, or &quot;off&quot; message</span>
<span class="sd">            `valueId`: the &quot;id&quot; to look for in `data`. `None` or blank to return the first value found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">valueId</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">valueId</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Utility for processing action messages from TP. For example:
    {"type": "action", "data": [{ "id": "data object id", "value": "user specified value" }, ...]}</p>

<p>Returns the <code>value</code> with specific <code>id</code> from a list of action data,
or <code>None</code> if the <code>id</code> wasn't found. If a null id is passed in <code>valueId</code>
then the first entry which has a <code>value</code> key, if any, will be returned.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong><code>data</code>:</strong>  the "data" array from a TP "action", "on", or "off" message</li>
<li><strong><code>valueId</code>:</strong>  the "id" to look for in <code>data</code>. <code>None</code> or blank to return the first value found.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>pyee._executor.ExecutorEventEmitter</dt>
                                <dd id="Client.shutdown" class="function">shutdown</dd>

            </div>
            <div><dt>pyee._base.EventEmitter</dt>
                                <dd id="Client.on" class="function">on</dd>
                <dd id="Client.emit" class="function">emit</dd>
                <dd id="Client.once" class="function">once</dd>
                <dd id="Client.remove_listener" class="function">remove_listener</dd>
                <dd id="Client.remove_all_listeners" class="function">remove_all_listeners</dd>
                <dd id="Client.listeners" class="function">listeners</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="TYPES">
                                <div class="attr class">
        <a class="headerlink" href="#TYPES">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">TYPES</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">TYPES</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Event type enumerations. These correspond to the message types Touch Portal may send.</span>
<span class="sd">    Event handler callbacks receive one parameter, which is the JSON data structure sent</span>
<span class="sd">    from TP and then converted to a corresponding Python object using `json.loads()`.</span>
<span class="sd">    Usage example:</span>
<span class="sd">        ```py</span>
<span class="sd">        import TouchPortalAPI as TP</span>

<span class="sd">        client = TP.Client(&quot;myplugin&quot;)</span>

<span class="sd">        @client.on(TP.TYPES.onConnect)</span>
<span class="sd">        # equivalent to: @client.on(&#39;info&#39;)</span>
<span class="sd">        def onConnect(data):</span>
<span class="sd">            print(data)</span>

<span class="sd">        # alternatively, w/out decorators:</span>
<span class="sd">        def onAction(data):</span>
<span class="sd">            print(data)</span>

<span class="sd">        client.on(TP.TYPES.onAction, onAction)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">onHold_up</span> <span class="o">=</span> <span class="s1">&#39;up&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the action is used in a hold functionality and the user releases the Touch Portal button (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onHold_down</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the action is used in a hold functionality and the user presses the Touch Portal button down (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onConnect</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span>
    <span class="sd">&quot;&quot;&quot; Info message returned after successful pairing. &quot;&quot;&quot;</span>
    <span class="n">onAction</span> <span class="o">=</span> <span class="s1">&#39;action&#39;</span>
    <span class="sd">&quot;&quot;&quot; When actions are triggered by the user (Api 1.0+) &quot;&quot;&quot;</span>
    <span class="n">onListChange</span> <span class="o">=</span> <span class="s1">&#39;listChange&#39;</span>
    <span class="sd">&quot;&quot;&quot; When a user makes a change in one of your lists (Api 1.0+) &quot;&quot;&quot;</span>
    <span class="n">onConnectorChange</span> <span class="o">=</span> <span class="s1">&#39;connectorChange&#39;</span>
    <span class="sd">&quot;&quot;&quot; When a connector is used in a slider functionality (connector) (Api 4.0+) &quot;&quot;&quot;</span>
    <span class="n">onShutdown</span> <span class="o">=</span> <span class="s1">&#39;closePlugin&#39;</span>
    <span class="sd">&quot;&quot;&quot; When Touch Portal tries to close your plug-in (Api 2.0+) &quot;&quot;&quot;</span>
    <span class="n">onBroadcast</span> <span class="o">=</span> <span class="s1">&#39;broadcast&#39;</span>
    <span class="sd">&quot;&quot;&quot; When Touch Portal broadcasts a message (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onSettingUpdate</span> <span class="o">=</span> <span class="s1">&#39;settings&#39;</span>
    <span class="sd">&quot;&quot;&quot; When the plugin&#39;s Settings have been updated (by user or from the plugin itself) (Api 3.0+) &quot;&quot;&quot;</span>
    <span class="n">onNotificationOptionClicked</span> <span class="o">=</span> <span class="s2">&quot;notificationOptionClicked&quot;</span>
    <span class="sd">&quot;&quot;&quot; When a user clicks on a notification action (Api 4.0+) &quot;&quot;&quot;</span>
    <span class="n">allMessage</span> <span class="o">=</span> <span class="s1">&#39;any&#39;</span>
    <span class="sd">&quot;&quot;&quot; Special event handler which will receive **all** messages from TouchPortal. &quot;&quot;&quot;</span>
    <span class="n">onError</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
    <span class="sd">&quot;&quot;&quot; Special event emitted when any other event callback raises an exception.</span>
<span class="sd">        For this particular event, the parameter passed to the callback handler will be an `Exception` object.</span>
<span class="sd">        See also `pyee.ExecutorEventEmitter.error` event.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>

        </details>

            <div class="docstring"><p>Event type enumerations. These correspond to the message types Touch Portal may send.
Event handler callbacks receive one parameter, which is the JSON data structure sent
from TP and then converted to a corresponding Python object using <code>json.loads()</code>.</p>

<h6 id="usage-example">Usage example</h6>

<blockquote>
  <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">TouchPortalAPI</span> <span class="k">as</span> <span class="nn">TP</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">TP</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="s2">&quot;myplugin&quot;</span><span class="p">)</span>

<span class="nd">@client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">TP</span><span class="o">.</span><span class="n">TYPES</span><span class="o">.</span><span class="n">onConnect</span><span class="p">)</span>
<span class="c1"># equivalent to: @client.on(&#39;info&#39;)</span>
<span class="k">def</span> <span class="nf">onConnect</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># alternatively, w/out decorators:</span>
<span class="k">def</span> <span class="nf">onAction</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">TP</span><span class="o">.</span><span class="n">TYPES</span><span class="o">.</span><span class="n">onAction</span><span class="p">,</span> <span class="n">onAction</span><span class="p">)</span>
</code></pre></div>
</blockquote>
</div>


                            <div id="TYPES.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#TYPES.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">TYPES</span><span class="signature">()</span>
    </div>

        
    

                            </div>
                            <div id="TYPES.onHold_up" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onHold_up">#&nbsp;&nbsp</a>

        <span class="name">onHold_up</span><span class="default_value"> = &#39;up&#39;</span>
    </div>

            <div class="docstring"><p>When the action is used in a hold functionality and the user releases the Touch Portal button (Api 3.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onHold_down" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onHold_down">#&nbsp;&nbsp</a>

        <span class="name">onHold_down</span><span class="default_value"> = &#39;down&#39;</span>
    </div>

            <div class="docstring"><p>When the action is used in a hold functionality and the user presses the Touch Portal button down (Api 3.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onConnect" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onConnect">#&nbsp;&nbsp</a>

        <span class="name">onConnect</span><span class="default_value"> = &#39;info&#39;</span>
    </div>

            <div class="docstring"><p>Info message returned after successful pairing.</p>
</div>


                            </div>
                            <div id="TYPES.onAction" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onAction">#&nbsp;&nbsp</a>

        <span class="name">onAction</span><span class="default_value"> = &#39;action&#39;</span>
    </div>

            <div class="docstring"><p>When actions are triggered by the user (Api 1.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onListChange" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onListChange">#&nbsp;&nbsp</a>

        <span class="name">onListChange</span><span class="default_value"> = &#39;listChange&#39;</span>
    </div>

            <div class="docstring"><p>When a user makes a change in one of your lists (Api 1.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onConnectorChange" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onConnectorChange">#&nbsp;&nbsp</a>

        <span class="name">onConnectorChange</span><span class="default_value"> = &#39;connectorChange&#39;</span>
    </div>

            <div class="docstring"><p>When a connector is used in a slider functionality (connector) (Api 4.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onShutdown" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onShutdown">#&nbsp;&nbsp</a>

        <span class="name">onShutdown</span><span class="default_value"> = &#39;closePlugin&#39;</span>
    </div>

            <div class="docstring"><p>When Touch Portal tries to close your plug-in (Api 2.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onBroadcast" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onBroadcast">#&nbsp;&nbsp</a>

        <span class="name">onBroadcast</span><span class="default_value"> = &#39;broadcast&#39;</span>
    </div>

            <div class="docstring"><p>When Touch Portal broadcasts a message (Api 3.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onSettingUpdate" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onSettingUpdate">#&nbsp;&nbsp</a>

        <span class="name">onSettingUpdate</span><span class="default_value"> = &#39;settings&#39;</span>
    </div>

            <div class="docstring"><p>When the plugin's Settings have been updated (by user or from the plugin itself) (Api 3.0+)</p>
</div>


                            </div>
                            <div id="TYPES.onNotificationOptionClicked" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onNotificationOptionClicked">#&nbsp;&nbsp</a>

        <span class="name">onNotificationOptionClicked</span><span class="default_value"> = &#39;notificationOptionClicked&#39;</span>
    </div>

            <div class="docstring"><p>When a user clicks on a notification action (Api 4.0+)</p>
</div>


                            </div>
                            <div id="TYPES.allMessage" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.allMessage">#&nbsp;&nbsp</a>

        <span class="name">allMessage</span><span class="default_value"> = &#39;any&#39;</span>
    </div>

            <div class="docstring"><p>Special event handler which will receive <strong>all</strong> messages from TouchPortal.</p>
</div>


                            </div>
                            <div id="TYPES.onError" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#TYPES.onError">#&nbsp;&nbsp</a>

        <span class="name">onError</span><span class="default_value"> = &#39;error&#39;</span>
    </div>

            <div class="docstring"><p>Special event emitted when any other event callback raises an exception.
For this particular event, the parameter passed to the callback handler will be an <code>Exception</code> object.
See also <code>pyee.ExecutorEventEmitter.error</code> event.</p>
</div>


                            </div>
                </section>
    </main>
<script>/** elasticlunr - http://weixsong.github.io * Copyright (C) 2017 Oliver Nightingale * Copyright (C) 2017 Wei Song * MIT Licensed */!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.9.5",lunr=t,t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,o=0;n>o;o++){for(var r=e[o],s=0;i>s&&(r=this._queue[s](r,o,e),void 0!==r&&null!==r);s++);void 0!==r&&null!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e){return this._fields.push(e),this.index[e]=new t.InvertedIndex,this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.addDoc(i,e),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));this.documentStore.addFieldLength(i,n,o.length);var r={};o.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var s in r){var u=r[s];u=Math.sqrt(u),this.index[n].addToken(s,{ref:i,tf:u})}},this),n&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.hasDoc(i)&&(this.documentStore.removeDoc(i),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));o.forEach(function(e){this.index[n].removeToken(e,i)},this)},this),n&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),o=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=o,o},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];e="string"==typeof e?{any:e}:JSON.parse(JSON.stringify(e));var i=null;null!=n&&(i=JSON.stringify(n));for(var o=new t.Configuration(i,this.getFields()).get(),r={},s=Object.keys(e),u=0;u<s.length;u++){var a=s[u];r[a]=this.pipeline.run(t.tokenizer(e[a]))}var l={};for(var c in o){var d=r[c]||r.any;if(d){var f=this.fieldSearch(d,c,o),h=o[c].boost;for(var p in f)f[p]=f[p]*h;for(var p in f)p in l?l[p]+=f[p]:l[p]=f[p]}}var v,g=[];for(var p in l)v={ref:p,score:l[p]},this.documentStore.hasDoc(p)&&(v.doc=this.documentStore.getDoc(p)),g.push(v);return g.sort(function(e,t){return t.score-e.score}),g},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,o=n[t].expand,r=n[t].boost,s=null,u={};return 0!==r?(e.forEach(function(e){var n=[e];1==o&&(n=this.index[t].expandToken(e));var r={};n.forEach(function(n){var o=this.index[t].getDocs(n),a=this.idf(n,t);if(s&&"AND"==i){var l={};for(var c in s)c in o&&(l[c]=o[c]);o=l}n==e&&this.fieldSearchStats(u,n,o);for(var c in o){var d=this.index[t].getTermFrequency(n,c),f=this.documentStore.getFieldLength(c,t),h=1;0!=f&&(h=1/Math.sqrt(f));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=d*a*h*p;c in r?r[c]+=v:r[c]=v}},this),s=this.mergeScores(s,r,i)},this),s=this.coordNorm(s,u,e.length)):void 0},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var o in t)o in e&&(i[o]=e[o]+t[o]);return i}for(var o in t)o in e?e[o]+=t[o]:e[o]=t[o];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var o=t[i].length;e[i]=e[i]*o/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",o=n+"[^aeiouy]*",r=i+"[aeiou]*",s="^("+o+")?"+r+o,u="^("+o+")?"+r+o+"("+r+")?$",a="^("+o+")?"+r+o+r+o,l="^("+o+")?"+i,c=new RegExp(s),d=new RegExp(a),f=new RegExp(u),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+i+"[^aeiouwxy]$"),I=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,D=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,F=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,P=/ll$/,k=new RegExp("^"+o+i+"[^aeiouwxy]$"),z=function(n){var i,o,r,s,u,a,l;if(n.length<3)return n;if(r=n.substr(0,1),"y"==r&&(n=r.toUpperCase()+n.substr(1)),s=p,u=v,s.test(n)?n=n.replace(s,"$1$2"):u.test(n)&&(n=n.replace(u,"$1$2")),s=g,u=m,s.test(n)){var z=s.exec(n);s=c,s.test(z[1])&&(s=y,n=n.replace(s,""))}else if(u.test(n)){var z=u.exec(n);i=z[1],u=h,u.test(i)&&(n=i,u=S,a=x,l=w,u.test(n)?n+="e":a.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=I,s.test(n)){var z=s.exec(n);i=z[1],n=i+"i"}if(s=b,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+e[o])}if(s=E,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+t[o])}if(s=D,u=F,s.test(n)){var z=s.exec(n);i=z[1],s=d,s.test(i)&&(n=i)}else if(u.test(n)){var z=u.exec(n);i=z[1]+z[2],u=d,u.test(i)&&(n=i)}if(s=_,s.test(n)){var z=s.exec(n);i=z[1],s=d,u=f,a=k,(s.test(i)||u.test(i)&&!a.test(i))&&(n=i)}return s=P,u=d,s.test(n)&&u.test(n)&&(s=y,n=n.replace(s,"")),"y"==r&&(n=r.toLowerCase()+n.substr(1)),n};return z}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,"do":!0,does:!0,either:!0,"else":!0,ever:!0,every:!0,"for":!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,"if":!0,"in":!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,"this":!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,"while":!0,who:!0,whom:!0,why:!0,will:!0,"with":!0,would:!0,yet:!0,you:!0,your:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var o=e[i];o in n||(n[o]={docs:{},df:0}),i+=1,n=n[o]}var r=t.ref;n.docs[r]?n.docs[r]={tf:t.tf}:(n.docs[r]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(o){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",o=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(o=e.expand||o),"fields"in e)for(var r in e.fields)if(n.indexOf(r)>-1){var s=e.fields[r],u=o;void 0!=s.expand&&(u=s.expand),this.config[r]={boost:s.boost||0===s.boost?s.boost:1,bool:s.bool||i,expand:u}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,o,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;){if(r===e)return o;e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o]}return r===e?o:-1},lunr.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;)e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,n=0,i=0,o=this.length,r=e.length,s=this.elements,u=e.elements;;){if(n>o-1||i>r-1)break;s[n]!==u[i]?s[n]<u[i]?n++:s[n]>u[i]&&i++:(t.add(s[n]),n++,i++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var o=0,r=n.toArray();o<r.length;o++)i.add(r[o]);return i},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();</script>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let searchIndex, searchErr;

    async function initialize() {
        let docs;
        try {
            let resp = await fetch("../search.json");
            docs = await resp.json();
        } catch (e) {
            searchErr = "Cannot fetch search index.";
            throw e;
        }

        // Also split on html tags. this is a cheap heuristic, but good enough.
        elasticlunr.tokenizer.setSeperator(/[\s\-.;&]+|<[^>]*>/);

        if (docs._isPrebuiltIndex) {
            console.info("using precompiled search index");
            searchIndex = elasticlunr.Index.load(docs);
        } else {
            console.time("building search index");
            searchIndex = elasticlunr(function () {
                this.addField('qualname');
                this.addField('fullname');
                this.addField('doc');
                this.setRef('fullname');
            });
            for (let doc of docs) {
                searchIndex.addDoc(doc);
            }
            console.timeEnd("building search index");
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const search = getSearchTerm();
            if (!search) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!searchIndex) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = searchIndex.search(search, {
                fields: {
                    qualname: {boost: 4},
                    fullname: {boost: 2},
                    doc: {boost: 1},
                },
                expand: true
            });

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(search)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(search)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">(${doc.parameters.join(", ")})</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>